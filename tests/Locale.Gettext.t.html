<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="ja">

<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
  <meta http-equiv="content-script-type" content="text/javascript" />
  <script type="text/javascript" src="../lib/JSAN.js"></script>
</head>

<body>
<script type="text/javascript" src="../lib/Locale.js"></script>
<script type="text/javascript" src="../lib/Locale/Gettext.js"></script>

<form id="fm" name="fm">
  <textarea name="ta1" id="ta" cols="40" rows="15">
# コメント
# コメント
# コメント
# コメント
# コメント
# コメント
msgid ""
msgstr ""
"Project-Id-Version:\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2006-06-28 09:11-0600\n"
"PO-Revision-Date: 2006-05-17 13:30+0900\n"
"Last-Translator:"
"Language-Team: Japanese\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
#"Plural-Forms: nplurals=1; plural=0;\n"

msgid "apple"
msgid_plural "apples"
msgstr[0] "１つのリンゴ"
msgstr[1] "複数のリンゴ"

msgid "test string"
msgstr "テスト文字列"

msgid ""
""
"multiline test"
msgstr ""
""
"マルチラインのテスト"

msgid ""
"test"
"tset"
msgstr ""
</textarea>
  <textarea name="ta2" id="ta" cols="40" rows="15">
  </textarea>
  <!-- <input type="button" onclick="document.fm.ta2.value = Locale.Gettext.PO.po2json(document.fm.ta1.value)" value="eval" /> -->
</form>


<pre id="test"><script type="text/javascript">
JSAN.addRepository('../lib').use('Test.Simple');
plan({tests: 5});
JSAN.errorLevel = 'warn';
Locale.setlocale(Locale.LC_ALL, 'ja');
var json;
ok(eval('json = ' + (document.fm.ta2.value = Locale.Gettext.PO.po2json(document.fm.ta1.value))), 'po2json returns collect value');
Locale.Gettext._msgs['ja/LC_MESSAGES'] = new Locale.Gettext.PO(json);
ok(Locale.Gettext.gettext('test string') == 'テスト文字列', 'gettext succeed: ' + Locale.Gettext.gettext('test string'));
ok(Locale.Gettext.gettext('multiline test') == 'マルチラインのテスト', 'gettext succeed: ' + Locale.Gettext.gettext('multiline test'));
ok(Locale.Gettext.ngettext('apple', 'apples', 1) == '１つのリンゴ', 'ngettext succeed: ' + Locale.Gettext.ngettext('apple', 'apples', 1));
ok(Locale.Gettext.ngettext('apple', 'apples', 100) == '複数のリンゴ', 'ngettext succeed: ' + Locale.Gettext.ngettext('apple', 'apples', 100));
</script></pre>
     
</body>
</html>
